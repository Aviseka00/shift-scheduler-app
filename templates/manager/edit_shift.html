{% extends "base.html" %}
{% block content %}

<h3 class="mb-4">Edit Shift</h3>

<div class="card shadow-sm">
  <div class="card-body">
    <form method="post">
      <div class="row g-3">
        <div class="col-md-3">
          <label class="form-label">Date</label>
          <input type="date" class="form-control" name="date"
                 value="{{ shift.date }}" required>
        </div>

        <div class="col-md-3">
          <label class="form-label">Shift Code</label>
          <select name="shift_code" class="form-select" required>
            <option value="A" {% if shift.shift_code == 'A' %}selected{% endif %}>
              A (06:00 – 14:30)
            </option>
            <option value="B" {% if shift.shift_code == 'B' %}selected{% endif %}>
              B (14:00 – 22:30)
            </option>
            <option value="C" {% if shift.shift_code == 'C' %}selected{% endif %}>
              C (22:00 – 06:00 next day)
            </option>
            <option value="G" {% if shift.shift_code == 'G' %}selected{% endif %}>
              G (09:00 – 17:30)
            </option>
            <option value="W" {% if shift.shift_code == 'W' %}selected{% endif %}>
              W (Weekoff - All Day)
            </option>
            <option value="L" {% if shift.shift_code == 'L' %}selected{% endif %}>
              L (Leave - All Day)
            </option>
          </select>
        </div>

        <div class="col-md-3">
          <label class="form-label">Project</label>
          <select name="project_id" class="form-select">
            <option value="">General</option>
            {% for p in projects %}
            <option value="{{ p._id }}"
              {% if shift.project_id and p._id == shift.project_id %}selected{% endif %}>
              {{ p.name }}
            </option>
            {% endfor %}
          </select>
        </div>

        <div class="col-md-3">
          <label class="form-label">Assign To</label>
          <select name="user_id" class="form-select" required>
            {% for u in users %}
            <option value="{{ u._id }}"
              {% if u._id == shift.user_id %}selected{% endif %}>
              {{ u.name }} ({{ u.email }})
            </option>
            {% endfor %}
          </select>
        </div>

        <div class="col-12">
          <label class="form-label">Task / Notes</label>
          <input type="text" class="form-control" name="task"
                 value="{{ shift.task or '' }}">
          <div class="form-text">
            Shift start/end times are set automatically based on A / B / C / G.
          </div>
        </div>
      </div>

      <button class="btn btn-primary mt-4">
        Save Changes
      </button>
      <a href="/manager/manage-shifts"
         class="btn btn-outline-secondary mt-4 ms-2">
        Cancel
      </a>
    </form>
  </div>
</div>

{% endblock %}
