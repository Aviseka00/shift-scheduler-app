{% extends "base.html" %}
{% block content %}
<div class="animate-fade-in-up">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h2 class="mb-1" style="font-weight: 700; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">Projects</h2>
      <p class="text-muted mb-0">Manage all your projects and their schedules</p>
    </div>
    <a href="{{ url_for('project.create_project') }}" class="btn btn-primary">
      <i class="fas fa-plus me-2"></i>New Project
    </a>
  </div>

  <div class="glass-card p-0 overflow-hidden">
  <table class="table mb-0">
  <thead class="table-light">
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Duration</th>
      <th>Created</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for p in projects %}
    <tr>
      <td><a href="{{ url_for('project.view_project', project_id=p._id) }}">{{ p.name }}</a></td>
      <td>{{ p.description }}</td>
      <td>
        {% if p.start_date and p.end_date %}
          {{ p.start_date }} to {{ p.end_date }}
        {% else %}
          N/A
        {% endif %}
      </td>
      <td>{% if p.created_at %}{{ p.created_at.strftime('%Y-%m-%d') }}{% else %}N/A{% endif %}</td>
      <td>
        <div class="d-flex gap-1">
          <a href="{{ url_for('project.edit_project', project_id=p._id) }}" class="btn btn-sm btn-outline-primary"><i class="fas fa-edit"></i></a>
          <form method="post" action="{{ url_for('project.delete_project', project_id=p._id) }}" class="d-inline" onsubmit="return confirm('Are you sure you want to delete this project? This will also delete all associated tasks and unlink shifts. This action cannot be undone.');">
            <button type="submit" class="btn btn-sm btn-outline-danger"><i class="fas fa-trash"></i></button>
          </form>
        </div>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
</div>
</div>
{% endblock %}
